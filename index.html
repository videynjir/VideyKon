<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="monetag" content="334fb36ba8b93bcaf5418327db26d87d"/>
    <title>Videy Stream - Best Streaming Indo</title>

    <script type="text/javascript">
      (function (l) {
        // Redirect logic for /#:id to /:id
        if (l.hash && l.hash.startsWith('#/')) {
          const newPath = l.hash.replace('#', '');
          window.location.replace(newPath); // Redirect to /:id
        }

        // Existing logic for handling search parameters
        if (l.search[1] === "/") {
          var decoded = l.search
            .slice(1)
            .split("&")
            .map(function (s) {
              return s.replace(/~and~/g, "&");
            })
            .join("?");
          window.history.replaceState(null, null, l.pathname.slice(0, -1) + decoded + l.hash);
        }
      })(window.location);
    </script>
<!-- Monetag -->    
<script>(function(s){s.dataset.zone='10078153',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
<script>(function(s){s.dataset.zone='10078161',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>    
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PV4883WYS4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PV4883WYS4');
</script>
    
  
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
(function () {
    /**
     * Method 1: Detect AdBlocker based on browser extensions.
     */
    function detectAdBlockExtension() {
        return new Promise((resolve) => {
            const bait = document.createElement("div");
            bait.className = "adsbox ad-banner ad-unit text-ad";
            bait.style.width = "1px";
            bait.style.height = "1px";
            bait.style.position = "absolute";
            bait.style.left = "-9999px";
            bait.style.top = "-9999px";
            bait.style.visibility = "hidden";
            document.body.appendChild(bait);

            setTimeout(() => {
                const isBlocked = !bait.parentElement || bait.offsetParent === null || window.getComputedStyle(bait).display === "none";
                if (bait.parentElement) {
                    document.body.removeChild(bait);
                }
                resolve(isBlocked);
            }, 100);
        });
    }

    /**
     * Method 2: Detect DNS-based ad blockers.
     */
    function detectDnsBlock() {
        const adUrl = 'https://facultativethus.com/e57ns91yz8?key=06ab55d13d86b8641e906b3b87eb6915';
        
        return fetch(adUrl, { method: 'HEAD', mode: 'no-cors', cache: 'no-store' })
            .then(() => false)
            .catch(() => true);
    }

    /**
     * Displays a sleek, dark-themed adblock pop-up with a specific message.
     * @param {'extension'|'dns'} type The type of ad blocker detected.
     */
    function showAdblockPopup(type) {
        if (document.getElementById("adblock-overlay")) {
            return;
        }

        const overlay = document.createElement("div");
        overlay.id = "adblock-overlay";

        // CSS for a minimalist, dark theme
        const styles = `
            #adblock-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.95);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 99999;
                opacity: 0;
                transition: opacity 0.4s ease;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            }
            .adblock-popup {
                background-color: #121212;
                color: #e0e0e0;
                padding: 30px;
                border-radius: 12px;
                text-align: center;
                max-width: 400px;
                width: 85%;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
                transform: scale(0.95);
                transition: transform 0.4s ease;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            .adblock-popup h2 {
                margin: 0 0 10px;
                font-size: 22px;
                font-weight: 600;
                color: #2ecc71; /* A calm green accent */
            }
            .adblock-popup p {
                margin: 0 0 20px;
                font-size: 15px;
                line-height: 1.5;
                color: #b0b0b0;
            }
            #refresh-page-btn {
                background-color: #27ae60;
                color: white;
                border: none;
                border-radius: 8px;
                padding: 10px 20px;
                font-size: 15px;
                font-weight: 500;
                cursor: pointer;
                transition: background-color 0.2s ease, transform 0.2s ease;
            }
            #refresh-page-btn:hover {
                background-color: #2c9c57;
                transform: translateY(-1px);
            }
        `;

        let title, message;
        if (type === 'extension') {
            title = 'Ad Blocker Detected';
            message = 'This site relies on ads to stay free. Please consider **disabling your ad blocker extension** or whitelisting our website to support us.';
        } else if (type === 'dns') {
            title = 'DNS Ad Blocker Detected';
            message = 'Your DNS provider is likely blocking our ads. To view this site properly, please consider **changing your DNS settings** or disabling any ad-blocking features on your network.';
        } else {
            return;
        }

        overlay.innerHTML = `
            <style>${styles}</style>
            <div class="adblock-popup">
                <h2>${title}</h2>
                <p>${message}</p>
                <button id="refresh-page-btn">I've Disabled It</button>
            </div>
        `;
        document.body.appendChild(overlay);

        setTimeout(() => {
            overlay.style.opacity = "1";
            overlay.querySelector(".adblock-popup").style.transform = "scale(1)";
        }, 10);

        document.getElementById("refresh-page-btn").addEventListener("click", () => {
            location.reload();
        });
    }

    /**
     * Run detection on page load and display the appropriate pop-up.
     */
    window.addEventListener("load", async () => {
        const isExtensionBlocked = await detectAdBlockExtension();
        if (isExtensionBlocked) {
            showAdblockPopup('extension');
            return;
        }

        const isDnsBlocked = await detectDnsBlock();
        if (isDnsBlocked) {
            showAdblockPopup('dns');
        }
    });

})();
</script>

  </body>
</html>
